# 🎨 OPPO Live Photo Viewer - v1.7 折叠面板和主题切换

## ✅ 新功能

### 1. 可折叠的左侧面板 📁

**功能描述：**
- 左侧文件选择面板可以折叠/展开
- 点击折叠按钮（◀/▶）切换
- 自动保存和恢复面板宽度
- 最大化图片显示区域

**UI布局：**
```
展开状态：
┌────────┬────────────────────────────┐
│ 文件  │ ◀ ✅ Live Photo      [D] │  ← 折叠按钮
│ 列表  ├────────────────────────────┤
│        │      图片展示区域          │
│        │                             │
└────────┴────────────────────────────┘

折叠状态：
┌────────┬────────────────────────────┐
│        │ ▶ ✅ Live Photo      [D] │  ← 展开按钮
│        ├────────────────────────────┤
│        │                             │
│        │      图片展示区域          │  ← 更多空间
│        │          (最大化）           │
└────────┴────────────────────────────┘
```

---

### 2. 深色/浅色模式切换 🌓

**快捷键：** `D`

**浅色模式（默认）：**
```
- 背景：浅色（#f0f0f0）
- 文字：深色（#1e1e1e）
- 图片背景：深灰（#1e1e1e）
```

**深色模式：**
```
- 背景：深色（#1e1e1e）
- 文字：浅色（#e0e0e0）
- 图片背景：纯黑（#000000）
- 列表背景：深灰（#2d2d2d）
```

---

## 🔧 技术实现

### 1. 左侧面板折叠

```python
def toggle_left_panel(self):
    """切换左侧面板显示/隐藏"""
    if self.is_left_panel_visible:
        # 隐藏左侧面板
        self.left_panel_original_width = self.splitter.sizes()[0]
        self.splitter.setSizes([0, self.width()])
        self.collapse_button.setText("▶")
        self.is_left_panel_visible = False
    else:
        # 显示左侧面板
        self.splitter.setSizes([self.left_panel_original_width, ...])
        self.collapse_button.setText("◀")
        self.is_left_panel_visible = True
```

### 2. 主题切换

**快捷键设置：**
```python
def setup_shortcuts(self):
    self.theme_shortcut = QShortcut(QKeySequence("D"), self)
    self.theme_shortcut.activated.connect(self.toggle_theme)
```

**主题应用：**
```python
def toggle_theme(self):
    self.dark_mode = not self.dark_mode
    if self.dark_mode:
        self.apply_dark_theme()
    else:
        self.apply_light_theme()
```

---

## 🎨 使用方法

### 折叠/展开左侧面板

1. **点击折叠按钮**：点击右上角的 ◀ 按钮
2. **左侧面板隐藏**：面板收缩，图片区域变大
3. **点击展开按钮**：点击右上角的 ▶ 按钮
4. **左侧面板恢复**：面板展开，恢复原宽度

### 切换深色/浅色模式

1. **按D键**：切换到深色模式
2. **再次按D键**：切换回浅色模式
3. **查看提示**：右上角显示当前模式提示

---

## 📊 功能对比

| 特性 | v1.6 | v1.7 |
|------|------|------|
| 左侧面板 | 固定宽度 | ✅ 可折叠 |
| 图片显示区域 | 受限 | ✅ 最大化 |
| 主题 | 固定浅色 | ✅ 深色/浅色 |
| 快捷键 | 无 | ✅ D键切换 |
| 夜间使用 | 不舒适 | ✅ 舒适 |

---

## 💡 使用场景

### 场景1：专注查看图片

1. 打开文件夹
2. 点击折叠按钮
3. 最大化图片显示区域
4. 用键盘上下键浏览

### 场景2：夜间使用

1. 按D键切换到深色模式
2. 保护眼睛
3. 舒适浏览图片

### 场景3：白天使用

1. 按D键切换到浅色模式
2. 清晰明亮
3. 快速识别文件

---

## 🎯 优势

### 可折叠面板
- ✅ 最大化图片显示空间
- ✅ 临时隐藏文件列表
- ✅ 一键恢复面板
- ✅ 保持原有宽度

### 主题切换
- ✅ 护眼（深色模式）
- ✅ 清晰（浅色模式）
- ✅ 快速切换
- ✅ 适应不同环境

---

## 📦 新版本

**版本：** v1.7
**位置：** `/home/yezichao/.openclaw/workspace/oppo-live-viewer/dist/OPPO-Live-Viewer`
**大小：** 约76 MB

---

## 🚀 立即使用

**双击运行：**
```
/home/yezichao/.openclaw/workspace/oppo-live-viewer/dist/OPPO-Live-Viewer
```

**测试新功能：**
1. 点击折叠按钮（◀）隐藏左侧面板
2. 点击展开按钮（▶）恢复左侧面板
3. 按D键切换到深色模式
4. 再次按D键切换回浅色模式

---

## 📋 Git提交

```bash
d333791 Add collapsible panel and dark/light theme toggle
86d5d1e Update documentation for v1.6
812f992 Fix keyboard navigation: load image on arrow key selection
```

---

## 🔍 版本历史

| 版本 | 日期 | 主要改进 |
|------|------|----------|
| v1.0 | 2026-02-27 | 初始版本 |
| v1.1 | 2026-02-27 | 添加循环和静音控制 |
| v1.1.1 | 2026-02-27 | 修复闪退问题 |
| v1.2 | 2026-02-27 | 支持普通图片和Live指示器 |
| v1.3 | 2026-02-27 | UI优化：移除冗余，修复抖动 |
| v1.4 | 2026-02-27 | 文件列表优化：显示路径，简化文件名 |
| v1.5 | 2026-02-27 | UI闪烁修复：统一文案长度 |
| v1.6 | 2026-02-27 | Bug修复：键盘导航支持 |
| v1.7 | 2026-02-27 | **可折叠面板 + 深色/浅色主题** ⭐ |

---

## 💡 改进总结

| 功能 | v1.6 | v1.7 |
|------|------|------|
| 左侧面板 | 固定 | ✅ 可折叠 |
| 图片区域 | 受限 | ✅ 可最大化 |
| 主题模式 | 单一 | ✅ 双模式 |
| 快捷键 | 无 | ✅ D键切换 |
| 护眼支持 | 无 | ✅ 深色模式 |
| 用户体验 | 一般 | ✅ 优秀 |

---

**更新时间：** 2026-02-27 18:15
**版本：** v1.7
**新功能：** 可折叠面板 + 深色/浅色主题切换
